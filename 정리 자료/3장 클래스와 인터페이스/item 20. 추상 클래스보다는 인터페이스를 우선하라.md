# item 20. μ¶”μƒ ν΄λμ¤λ³΄λ‹¤λ” μΈν„°νμ΄μ¤λ¥Ό μ°μ„ ν•λΌ

<aside>
π’΅ μΈν„°νμ΄μ¤μ μ¥μ κ³Ό κ³¨κ²© κµ¬ν„ ν΄λμ¤λ¥Ό ν†µν•΄ μΈν„°νμ΄μ¤μ™€ μ¶”μƒ ν΄λμ¤μ μ¥μ μ„ λ¨λ‘ μ·¨ν•λ” λ°©λ²•μ„ μ•μ•„λ³΄μ

</aside>

### μΈν„°νμ΄μ¤μ™€ μ¶”μƒ ν΄λμ¤

μλ°”κ°€ μ κ³µν•λ” λ‹¤μ¤‘ κµ¬ν„ λ©”μ»¤λ‹μ¦μ€ μΈν„°νμ΄μ¤μ™€ μ¶”μƒ ν΄λμ¤ λ‘ κ°κ°€ μλ‹¤.

μλ°” 8λ¶€ν„°λ” μΈν„°νμ΄μ¤λ„ λ””ν΄νΈ λ©”μ„λ“λ¥Ό μ κ³µν•  μ μκ²λμ–΄ λ‘ λ©”μ»¤λ‹μ¦ λ¨λ‘ μΈμ¤ν„΄μ¤ λ©”μ„λ“λ¥Ό κµ¬ν„ ν•νƒλ΅ μ κ³µν•  μ μλ‹¤.

**κ³µν†µμ **

β€Ά λ©”μ„λ“μ μ‹κ·Έλ‹μ³λ§ λ§λ“¤κ³  κµ¬ν„μ„ κµ¬ν„ ν΄λμ¤μ—κ² λ§΅κΈ΄λ‹¤.

**μ°¨μ΄μ **

μ¶”μƒ ν΄λμ¤ : λ‹¨μΌ μƒμ†λ§ μ§€μ›, μ¶”μƒ ν΄λμ¤κ°€ μ •μν• νƒ€μ…μ„ κµ¬ν„ν•λ” ν΄λμ¤λ” λ°λ“μ‹ μ¶”μƒ ν΄λμ¤μ ν•μ„ ν΄λμ¤κ°€ λμ–΄μ•Ό ν•λ‹¤. β‡’ μλ°”λ” λ‹¨μΌ μƒμ†λ§μ„ μ§€μ›ν•μ—¬, μƒλ΅μ΄ νƒ€μ…μ„ μ •μν•λ”λ° μ μ•½μ΄ μƒκΉ€

μΈν„°νμ΄μ¤ :  λ‹¤μ¤‘ μƒμ† κ°€λ¥, **μ„ μ–Έν• λ©”μ„λ“λ¥Ό λ¨λ‘ μ •μν•κ³  κ·Έ μΌλ° κ·μ•½μ„ μ μ§€ν‚¨ ν΄λμ¤λΌλ©΄ λ‹¤λ¥Έ μ–΄λ–¤ ν΄λμ¤λ¥Ό μƒμ†ν–λ“  κ°™μ€ νƒ€μ…μΌλ΅ μ·¨κΈ‰λ°›λ”λ‹¤.**

### μΈν„°νμ΄μ¤λ” κΈ°λ³Έ ν΄λμ¤μ—λ„ μ†μ‰½κ² μƒλ΅μ΄ μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•΄ λ„£μ„ μ μλ‹¤.

μΈν„°νμ΄μ¤κ°€ μ”κµ¬ν•λ” λ©”μ„λ“λ¥Ό μ¶”κ°€ν•κ³ , ν΄λμ¤ μ„ μ–Έμ— `implements` λ§ μ¶”κ°€ν•λ©΄ λ!

ν•μ§€λ§ μ¶”μƒ ν΄λμ¤μ κ²½μ°, λ‘ ν΄λμ¤κ°€ κ°™μ€ μ¶”μƒ ν΄λμ¤λ¥Ό ν™•μ¥ν•κΈΈ μ›ν•λ‹¤λ©΄, κ·Έ μ¶”μƒ ν΄λμ¤λ” κ³„μΈµκµ¬μ΅°μƒ λ‘ ν΄λμ¤μ κ³µν†µ μ΅°μƒμ΄μ–΄μ•Ό ν•λ‹¤.

β‡’ ν΄λμ¤ κ³„μΈµ κµ¬μ΅°μ— νΌλ€μ„ μΌμΌν‚΄, μƒλ΅ μ¶”κ°€λ μ¶”μƒ ν΄λμ¤μ λ¨λ“  μμ†μ΄ μ›ν•μ§€λ„ μ•λ” λ©”μ„λ“λ¥Ό κ°•μ λ΅ μƒμ† λ°›κ² λλ‹¤.

### μΈν„°νμ΄μ¤λ” λ―Ήμ¤μΈ(mixin) μ •μμ— μ•μ„±λ§μ¶¤μ΄λ‹¤.

**λ―Ήμ¤μΈμ΄λ€?**

ν΄λμ¤κ°€ κµ¬ν„ν•  μ μλ” νƒ€μ…μΌλ΅, λ―Ήμ¤μΈμ„ κµ¬ν„ν• ν΄λμ¤μ— μ›λμ β€μ£Όλ νƒ€μ…β€™ μ™Έμ—λ„ **νΉμ • μ„ νƒμ  ν–‰μ„λ¥Ό μ κ³µν•λ‹¤κ³  μ„ μ–Έν•λ” ν¨κ³Όλ¥Ό μ¤€λ‹¤.**

λ€ν‘μ μΈ μλ΅ `Comparable`μ€ ν΄λμ¤μ κ³ μ ν• μ—­ν•  μ™Έμ— μμ‹ μ„ κµ¬ν„ν• **μΈμ¤ν„΄μ¤λ“¤λΌλ¦¬ μμ„λ¥Ό μ •ν•  μ μλ‹¤κ³  μ„ μ–Έν•λ” λ―Ήμ¤μΈ μΈν„°νμ΄μ¤λ‹¤.**

μ΄μ²λΌ λ€μƒ νƒ€μ…μ μ£Όλ κΈ°λ¥μ— **μ„ νƒμ  κΈ°λ¥**μ„ β€νΌν•©(mixed in)β€™ν•λ‹¤κ³  ν•΄μ„ λ―Ήμ¤μΈμ΄λΌκ³  λ¶€λ¥Έλ‹¤.

μ¶”μƒ ν΄λμ¤λ΅λ” λ―Ήμ¤μΈμ„ μ •μν•  μ μ—†λ‹¤. μ΄μ λ” κΈ°μ΅΄ ν΄λμ¤μ— λ§μ”μΈ μ μ—†κΈ° λ•λ¬Έμ΄λ‹¤. ν΄λμ¤λ” λ‘ λ¶€λ¨λ¥Ό μ„¬κΈΈ μ μ—†κ³ , ν΄λμ¤ κ³„μΈµκµ¬μ΅°μ—λ” λ―Ήμ¤μΈμ„ μ‚½μ…ν•κΈ°μ— ν•©λ¦¬μ μΈ μ„μΉκ°€ μ—†κΈ° λ•λ¬Έμ΄λ‹¤.

μλ¥Ό λ“¤μ–΄ λ¶€λ¨ Aλ¥Ό μƒμ† λ°›λ” μμ‹ B ν΄λμ¤κ°€ μλ‹¤λ©΄ Comparableμ„ μ¶”μƒ ν΄λμ¤λ΅ μ •μν•λ‹¤λ©΄, λ‘ ν΄λμ¤μ— Comparableμ μ—­ν• μ„ λ„£λ” μ„μΉκ°€ μ• λ§¤ν•λ‹¤.

### μΈν„°νμ΄μ¤λ΅λ” κ³„μΈµκµ¬μ΅°κ°€ μ—†λ” νƒ€μ… ν”„λ μ„μ›ν¬λ¥Ό λ§λ“¤ μ μλ‹¤.

κ°€μ(Singer)μ™€ μ‘κ³΅κ°€(SongWriter)λ΅ μλ¥Ό λ“¤μ–΄λ³΄μ

ν„μ‹¤ μ„Έκ³„μ—λ” μ‘κ³΅μ„ ν•λ” κ°€μλ„ μλ‹¤.

```java
public interface Singer {
    AudioClip sing(Song s);
}
```

```java
public interface SongWriter {
    Song compose(int chartPosition);
}
```

```java
public interface SingerSongwriter extends Singer, SongWriter{
    // μ•…κΈ°λ¥Ό μ—°μ£Όν•λ‹¤
    AudioClip strum();

    void actSensitive();
}
```

λ§μ•½ μ΄λ° μ‹±μ–΄μ†΅λΌμ΄ν„°λ¥Ό μΈν„°νμ΄μ¤λ΅ λ§λ“ λ‹¤λ©΄ κ°€μ(Singer)μ™€ μ‘κ³΅κ°€(SongWriter)λ¥Ό μΈν„°νμ΄μ¤λ΅ κµ¬ν„ν•μ—¬ μƒμ†λ°›μΌλ©΄, μ „ν€ λ¬Έμ κ°€ μƒκΈ°μ§€ μ•λ”λ‹¤.

μ‹¬μ§€μ–΄ Singerμ™€ SongWriterμ λ™μ‘ μ™Έμ—λ„ μƒλ΅μ΄ λ©”μ„λ“λ¥Ό μ¶”κ°€ν• μ  3μ μΈν„°νμ΄μ¤λ¥Ό μ •μν•  μλ„ μλ‹¤.

κ°™μ€ κµ¬μ΅°λ¥Ό ν΄λμ¤λ΅ λ§λ“¤λ ¤λ©΄ κ°€λ¥ν• μ΅°ν•© μ „λ¶€λ¥Ό κ°κ°μ ν΄λμ¤λ΅ μ •μν• κ³ λ„λΉ„λ§ κ³„μΈµκµ¬μ΅°κ°€ λ§λ“¤μ–΄μ§„λ‹¤.

μ†μ„±μ΄ nκ°λΌλ©΄ μ§€μ›ν•΄μ•Όν•  μ΅°ν•© μλ” 2^nκ°κ°€ λλ‹¤. β‡’ μ΅°ν•© ν­λ°, κ±°λ€ν• ν΄λμ¤ κ³„μΈµ κµ¬μ΅°μ—λ” κ³µν†µ κΈ°λ¥μ„ μ •μν•΄λ†“μ€ νƒ€μ…μ΄ μ—†μΌλ‹, μμΉ« λ§¤κ°λ³€μ νƒ€μ…λ§ λ‹¤λ¥Έ λ©”μ„λ“λ“¤μ΄ μμ—†μ΄ λ§μ΄ κ°€μ§„ κ±°λ€ν• ν΄λμ¤κ°€ μƒκΈΈ μ μλ‹¤.

### λνΌ ν΄λμ¤ κ΄€μ©κµ¬μ™€ ν•¨κ» μ‚¬μ©ν•λ©΄ μΈν„°νμ΄μ¤μ κΈ°λ¥μ„ ν–¥μƒμ‹ν‚¤λ” μ•μ „ν•κ³  κ°•λ ¥ν• μλ‹¨μ΄ λλ‹¤.

νƒ€μ…μ„ μ¶”μƒ ν΄λμ¤λ΅ μ •μν•΄λ‘λ©΄ κ·Έ νƒ€μ…μ— κΈ°λ¥μ„ μ¶”κ°€ν•λ” λ°©λ²•μ€ μƒμ†λΏμ΄λ‹¤.

μƒμ†ν•΄μ„ λ§λ“  ν΄λμ¤λ” λνΌ ν΄λμ¤λ³΄λ‹¤ ν™μ©λ„κ°€ λ–¨μ–΄μ§€κ³  κΉ¨μ§€κΈ°λ” λ” μ‰½λ‹¤.

### μΈν„°νμ΄μ¤μ λ©”μ„λ“ μ¤‘ κµ¬ν„ λ°©λ²•μ΄ λ…λ°±ν• κ²ƒμ΄ μλ‹¤λ©΄, κµ¬ν„μ„ λ””ν΄νΈ λ©”μ„λ“λ΅ μ κ³µν•΄ ν”„λ΅κ·Έλλ¨Έμ μΌκ°μ„ λμ–΄μ£Όμ

λ€μ‹  λ””ν΄νΈ λ©”μ„λ“λ¥Ό μ κ³µν•  λ•λ” μƒμ†ν•λ” μ‚¬λμ„μ„ν• μ„¤λ…μ„ `@implSpec` μλ°” λ… νƒκ·Έλ¥Ό λ¶™ν€ λ¬Έμ„ν™”ν•΄μ•Όν•λ‹¤.

**μΈν„°νμ΄μ¤μ™€ λ””ν΄νΈ λ©”μ„λ“μ μ μ•½**

- equalsλ‚ hashcodeμ™€ κ°™μ€ Objectμ λ©”μ„λ“λ” λ””ν΄νΈ λ©”μ„λ“λ΅ μ κ³µν•΄μ„λ” μ•λλ‹¤.
- μΈμ¤ν„΄μ¤λ” ν•„λ“λ¥Ό κ°€μ§μ μ—†κ³  publicμΈ μ •μ  λ©¤λ²„λ„ κ°€μ§ μ μ—†λ‹¤.(privateμ€ κ°€λ¥)
- λ‚΄κ°€ λ§λ“  μΈν„°νμ΄μ¤κ°€ μ•„λ‹λ©΄ λ””ν΄νΈ λ©”μ„λ“λ¥Ό μ¶”κ°€ν•  μ μ—†λ‹¤(?)

### μΈν„°νμ΄μ¤μ™€ μ¶”μƒ κ³¨κ²© κµ¬ν„ ν΄λμ¤λ¥Ό ν•¨κ» μ κ³µν•μ—¬ μΈν„°νμ΄μ¤μ™€ μ¶”μƒ ν΄λμ¤μ μ¥μ μ„ λ¨λ‘ μ·¨ν•  μ μλ‹¤.

μΈν„°νμ΄μ¤λ΅λ” νƒ€μ…μ„ μ •μν•κ³ , ν•„μ”ν•λ©΄ λ””ν΄νΈ λ©”μ„λ“λ¥Ό μ κ³µν•λ‹¤.

κ·Έλ¦¬κ³  κ³¨κ²© κµ¬ν„ ν΄λμ¤λ” λ‚λ¨Έμ§€ λ©”μ„λ“λ“¤κΉμ§€ κµ¬ν„ν•λ‹¤.

μ΄λ ‡κ² ν•΄λ‘λ©΄ λ‹¨μν κ³¨κ²© κµ¬ν„ ν΄λμ¤λ¥Ό ν™•μ¥ν•λ” κ²ƒλ§μΌλ΅ μ΄ μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•λ”λ° ν•„μ”λ΅ ν•λ” μΌμ΄ λ€λ¶€λ¶„ μ™„λ£λλ‹¤.

μ΄λ° ν¨ν„΄μ„ ν…ν”λ¦Ώ λ©”μ„λ“ ν¨ν„΄μ΄λΌκ³  ν•λ‹¤.

<aside>
π“ ****ν…ν”λ¦Ώ λ©”μ†λ“ ν¨ν„΄(Template Method Pattern)μ΄λ€?**** 
ν…ν”λ¦Ώ λ©”μ†λ“ ν¨ν„΄μ΄λ€ νΉμ • μ‘μ—…μ„ μ²λ¦¬ν•λ” μΌλ¶€λ¶„μ„ μ„λΈ ν΄λμ¤λ΅ μΊ΅μν™”ν•μ—¬ μ „μ²΄μ μΈ κµ¬μ΅°λ” λ°”κΎΈμ§€ μ•μΌλ©΄μ„ νΉμ • λ‹¨κ³„μ—μ„ μν–‰ν•λ” λ‚΄μ©μ„ λ°”κΎΈλ” ν¨ν„΄
μ•κ³ λ¦¬μ¦μ΄ λ‹¨κ³„λ³„λ΅ λ‚λ„μ–΄ μ§€κ±°λ‚, κ°™μ€ μ—­ν• μ„ ν•λ” λ©”μ†λ“μ΄μ§€λ§ μ—¬λ¬κ³³μ—μ„ λ‹¤λ¥Έν•νƒλ΅ μ‚¬μ©μ΄ ν•„μ”ν• κ²½μ° μ μ©ν• ν¨ν„΄

</aside>

κ΄€λ΅€μƒ μΈν„°νμ΄μ¤ μ΄λ¦„μ΄ `Interface`λΌλ©΄ κ·Έ κ³¨κ²© κµ¬ν„ ν΄λμ¤μ μ΄λ¦„μ€ `AbstarctInterface`λ΅ μ§“λ”λ‹¤.

μ) μ»¬λ ‰μ… ν”„λ μ„ μ›ν¬μ AbstractCollection, AbstractSet, AbstractList, AbstractMap

```java
static List<Integer> intArrayAsList(int[] a) {
    Objects.requireNonNull(a);

    return new AbstractList<>() {
        @Override
        public Integer get(int i) {
            return a[i];
        }

        @Override
        public Integer set(int i, Integer val) {
            int oldVal = a[i];
            a[i] = val;
            return oldVal;
        }

        @Override
        public int size() {
            return a.length;
        }
    };
}
```

μ„ μ½”λ“λ¥Ό λ³΄λ©΄ ν•„μ”ν• κΈ°λ¥λ§ μ¬μ •μν• μµλ… ν΄λμ¤λ¥Ό λ°ν™ν•λ‹¤.

![Untitled](https://user-images.githubusercontent.com/49682056/221361674-422951d1-cb9a-4a23-acb8-3ebec5f170a0.png)

AbstarctListμ getκ³Ό sizeλ” μ¶”μƒ λ©”μ„λ“λ΅ κ°•μ λ΅ κµ¬ν„μ„ ν•μ—¬μ•Όν•λ©°, setμ€ μΌλ° λ©”μ„λ“λ΅ μ‚¬μ©μμ μ…λ§›μ— λ”°λΌ μ¬μ •μν•μ—¬ λ³€κ²½ν•  μ μλ‹¤.

κ³¨κ²© κµ¬ν„ ν΄λμ¤λ” μ¶”μƒ ν΄λμ¤μ²λΌ κµ¬ν„μ„ λ„μ™€μ£Όλ” λ™μ‹μ—, μ¶”μƒ ν΄λμ¤λ΅ νƒ€μ…μ„ μ •μν•  λ• λ”°λΌμ¤λ” μ‹¬κ°ν• μ μ•½μ—μ„λ” μμ λ΅­λ‹¤.

κµ¬μ΅°μƒ κ³¨κ²© κµ¬ν„μ„ ν™•μ¥ν•μ§€ λ»ν•λ” κ²½μ°λΌλ©΄ μΈν„°νμ΄μ¤λ¥Ό μ§μ ‘ κµ¬ν„ν•΄μ•Όν•λ‹¤.

μ΄λ° κ²½μ°μ—λ„ μΈν„°νμ΄μ¤κ°€ μ§μ ‘ μ κ³µν•λ” λ””ν΄νΈ λ©”μ„λ“μ μ΄μ μ„ λ„λ¦΄ μ μλ‹¤.

μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν• ν΄λμ¤μ—μ„ ν•΄λ‹Ή κ³¨κ²© κµ¬ν„μ„ ν™•μ¥ν• private λ‚΄λ¶€ ν΄λμ¤λ΅ μ •μν•κ³ , κ° λ©”μ„λ“ νΈμ¶μ„ λ‚΄λ¶€ ν΄λμ¤μ μΈμ¤ν„΄μ¤μ— μ „λ‹¬ν•μ—¬ κ³¨κ²© κµ¬ν„ ν΄λμ¤λ¥Ό μ°νμ μΌλ΅λ„ μ‚¬μ©ν•  μμλ‹¤.

**κ³¨κ²© κµ¬ν„μ„ μ‘μ„±ν•λ” λ°©λ²•**

1. μΈν„°νμ΄μ¤λ¥Ό μ μ‚΄ν΄ λ‹¤λ¥Έ λ©”μ„λ“λ“¤μ κµ¬ν„μ— μ‚¬μ©λλ” κΈ°λ° λ©”μ„λ“λ§μ„ μ„ μ •ν•λ‹¤. (λ°λ“μ‹ κµ¬ν„ν•΄μ•Όν•λ‹¤λ” λ“±?) μ΄λ ‡κ² μ„ μ •ν• κΈ°λ° λ©”μ„λ“λ“¤μ€ κµ΄κ²© κµ¬ν„μ—μ„λ” μ¶”μƒ λ©”μ„λ“κ°€ λλ‹¤.
2. κΈ°λ° λ©”μ„λ“λ“¤μ„ μ‚¬μ©ν•΄ μ§μ ‘ κµ¬ν„ν•  μ μλ” λ©”μ„λ“λ¥Ό λ¨λ‘ λ””ν΄νΈ λ©”μ„λ“λ΅ μ κ³µν•λ‹¤.(equalsλ‚ hashcodeλ” μ κ³µν•΄μ„λ” μ•λλ‹¤.)
    1. λ§μ•½ μΈν„°νμ΄μ¤μ λ¨λ“  λ©”μ„λ“κ°€ κΈ°λ° λ©”μ„λ“μ™€ λ””ν΄νΈ λ©”μ„λ“κ°€ λλ‹¤λ©΄ κ³¨κ²© κµ¬ν„ ν΄λμ¤λ¥Ό λ³„λ„λ΅ λ§λ“¤ ν•„μ”λ” μ—†λ‹¤.
3. κΈ°λ° λ©”μ„λ“λ‚ λ””ν΄νΈ λ©”μ„λ“λ΅ λ§λ“¤μ§€ λ»ν• λ©”μ„λ“κ°€ λ‚¨μ•„ μλ‹¤λ©΄, μ΄ μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν•λ” κ³¨κ²© κµ¬ν„ ν΄λμ¤λ¥Ό λ§λ“¤μ–΄ λ‚¨μ€ λ©”μ„λ“λ“¤μ„ μ‘μ„±ν•΄ λ„£λ”λ‹¤.
4. ν•„μ”ν•λ©΄ κ³¨κ²© κµ¬ν„ ν΄λμ¤μ— publicμ΄ μ•„λ‹ ν•„λ“μ™€ λ©”μ„λ“λ¥Ό μ¶”κ°€ν•λ‹¤.

### μ •λ¦¬

μΌλ°μ μΌλ΅ λ‹¤μ¤‘ κµ¬ν„μ© νƒ€μ…μΌλ΅λ” μΈν„°νμ΄μ¤κ°€ κ°€μ¥ μ ν•©ν•λ‹¤.

λ³µμ΅ν• μΈν„°νμ΄μ¤λΌλ©΄ κµ¬ν„ν•λ” μκ³ λ¥Ό λμ–΄μ£Όλ” κ³¨κ²© κµ¬ν„μ„ ν•¨κ» μ κ³µν•λ” λ°©λ²•μ„ κΌ­ κ³ λ ¤ν•΄λ³΄μ.

κ³¨κ²© κµ¬ν„μ€ β€κ°€λ¥ν• ν•β€™ μΈν„°νμ΄μ¤μ λ””ν΄νΈ λ©”μ„λ“λ¥Ό μ κ³µν•μ—¬ κ·Έ μΈν„°νμ΄μ¤λ¥Ό κµ¬ν„ν• λ¨λ“  κ³³μ—μ„ ν™μ”ν•λ„λ΅ ν•λ” κ²ƒμ΄ μΆ‹λ‹¤.

β‡’ μΈν„°νμ΄μ¤μ— κ±Έλ ¤ μλ” κµ¬ν„μƒμ μ μ•½ λ•λ¬Έμ— μ¶”μƒ ν΄λμ¤λ΅ μ κ³µν•λ” κ²½μ°κ°€ λ” ν”ν•κΈ° λ•λ¬Έμ΄λ‹¤.