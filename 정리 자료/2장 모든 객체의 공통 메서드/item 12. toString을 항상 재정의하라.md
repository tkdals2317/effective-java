# item 12. toString을 항상 재정의하라

<aside>
💡 **toString을 재정의해야하는 이유를 알아보자**

</aside>

### toString이 호출되는 경우

- println
- printf
- 문자열 연결 연산자(+)
- assert 구문에 넘길 때
- 디버거가 객체를 출력할 때

### toString은 그 객체가 가진 주요 정보 모두를 반환하는 게 좋다.

하지만 객체가 너무 거대하거나 객체의 상태가 문자열로 표현하기에 적합하지 않다면 무리가 있다.

그럴 땐 “맨해튼 거주자 전화번호부(총 14251243개)” 나 Thread[main, 5, main]과 같이 요약적인 정보를 담아 반환하자.

이상적으로는 스스로를 완벽히 설명하는 문자열이면 좋다.

### 반환값의 포맷을 문서화 할 지 정하자

필수는 아니나 전화번호나 행렬 같은 **값 클래스**인 경우 문서화를 권한다.

포맷을 명시하면 그 객체는 표준적이고, 명확하고, 사람이 읽을 수 있게 된다.

포맷을 명시하기로 했다면, 명시한 폼에 맞는 문자열과 객체를 상호 전환할 수 있는 정적 팩터리나 생성자를 함께 제공해주면 좋다.

**포맷을 문서화 했을 때 장점**

- 출력값을 그대로 입출력에 사용할 수 있다
- CSV 파일처럼 사람이 읽을 수 있는 데이터 객체로 저장할 수 있다.

**포맷을 문서화 했을 때 단점**

- 포맷을 한번 명시하면 평생 그 포맷에 얽매이게 된다.

### 포맷을 명시하든 아니든 의도는 명확히 밝혀야 한다

포맷을 명시하기로 했다면 아주 정확하게 해야 한다.

```java
/**
* 이 전화번호의 문자열 표현을 반환한다.
* 이 문자열은 "XXX-YYY-ZZZZ" 형태의 12글자로 구성된다.
* XXX는 지역코드, YYY는 프리픽스, ZZZZ는 가입자 번호다.
* 각각의 대문자는 10진수 숫자 하나를 나타낸다.
* 
* 전화번호의 각 부분의 값이 너무 작아서 자릿수를 채울 수 없다면,
* 앞에서부터 0으로 채워나간다. 예컨데 가입자 번호가 123이라면
* 전화번호의 마지막 네 문자는 "0123"이 된다.
*/
@Override 
public String toString() {
    return String.format("%03d-%03d-%04d", areaCode, prefix, lineNum);
}
```

포맷을 명시하지 않기로 했다면 아래와 같이 작성할 수 있다.

```java
/**
* 이 약물에 관한 대략적인 설명을 반환한다.
* 다음은 이 설명의 일반적인 형태이나,
* 상세 형식은 정해지지 않았으며 향후 변경될 수 있다.
* 
* "[약물 #9: 유형-사랑, 냄새=테러빈유, 겉모습=먹물]"
*/
@Override
public String toString() { ... }
```

### 포맷 명시 여부와 상관없이 toString이 반환한 값에 포함된 정보를 얻어올 수 있는 API를 제공하자

각 필드를 가져올 수 있는 API, 내가 이해한 바로 따르면 주로 getter 역할을 하는 메서드를 만들어주자

그렇지 않다면 정보가 필요한 사람은 toString의 반환값을 파싱하여 사용할 수 밖에 없다.

### 정리

모든 구체 클래스에서 Object의 toString을 재정의하자. 상위 클래스에서 이미 알맞게 재정의한 경우는 예외이다.

**toString은 사용하기도 편하고 디버깅을 쉽게 만들어준다. 대신 해당 객체에 관한 명확하고 유용한 정보를 읽기 좋은 형태로 반환 해주자**