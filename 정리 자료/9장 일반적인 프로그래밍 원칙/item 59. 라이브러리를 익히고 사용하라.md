# item 59. ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ìµíˆê³  ì‚¬ìš©í•˜ë¼

<aside>
ğŸ’¡ ì§ì ‘ êµ¬í˜„í•˜ê¸°ë³´ë‹¤ ì´ë¯¸ ë§Œë“¤ì–´ì§„ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ìµíˆê³  ì‚¬ìš©í•˜ì

</aside>

### random ë©”ì„œë“œë¥¼ ì§ì ‘ êµ¬í˜„í•˜ì˜€ì„ ë•Œ ë¬¸ì œì 

```java
// ì½”ë“œ 59-1 í”í•˜ì§€ë§Œ ë¬¸ì œê°€ ì‹¬ê°í•œ ì½”ë“œ
static Random rnd = new Random();

private static int random(int n) {
    return Math.abs(rnd.nextInt()) % n;
}

public static void main(String[] args) {
    int n = 2 *  (Integer.MAX_VALUE / 3);
    int low = 0;
    for (int i = 0; i < 1000000; i++) {
        if (random(n) < n/2) {
            low++;
        }
    }
    System.out.println(low); // 500000 ê·¼ì²˜ì˜ ê°’ì´ ë‚˜ì˜¬ ê²ƒì„ ê¸°ëŒ€í•˜ì§€ë§Œ 666666ì— ê°€ê¹Œìš´ ê°’ì´ ë‚˜ì˜¨ë‹¤.
}

==== output =====
666636
```

ì§ì ‘ êµ¬í˜„í•œ random ë©”ì„œë“œì´ ë¬¸ì œì 

- nì´ ê·¸ë¦¬ í¬ì§€ ì•Šì€ 2ì˜ ì œê³±ìˆ˜ë¼ë©´ ì–¼ë§ˆ ì§€ë‚˜ì§€ ì•Šì•„ ê°™ì€ ìˆ˜ì—´ì´ ë°˜ë³µëœë‹¤.
- nì´ 2ì˜ ì œê³±ìˆ˜ê°€ ì•„ë‹ˆë¼ë©´ ì–¼ë§ˆ ì§€ë‚˜ì§€ ì•Šì•„ ê°™ì€ ìˆ˜ì—´ì´ ë°˜ë³µëœë‹¤.
- ì§€ì •í•œ ë²”ìœ„ì˜ ë°”ê¹¥ì˜ ìˆ˜ê°€ ì¢…ì¢… íŠ€ì–´ë‚˜ì˜¨ë‹¤.

ìœ„ ë¬¸ì œë“¤ì€ Random.nextInt(int)ë¥¼ ì‚¬ìš©í•˜ë©´ ë§¤ìš° ì‰½ê²Œ í•´ê²°ëœë‹¤.

![Untitled](https://github.com/tkdals2317/effective-java/assets/49682056/a1925245-77f4-42f1-a49f-b72fe81c853d)

ìœ„ ì½”ë“œì—ì„œ ì¡°ê±´ë¬¸ì„ `rnd.nextInt(n) < n/2` ë¡œë§Œ ë°”ê¿”ë„ ì •ìƒì ìœ¼ë¡œ 500000ë§Œ ê·¼ì²˜ì˜ ê°’ì„ ì–»ì„ ìˆ˜ ìˆì—ˆë‹¤.

```java
int low = 0;
for (int i = 0; i < 1000000; i++) {
    if (rnd.nextInt(n) < n/2) {
        low++;
    }
}
System.out.println(low);

==== output =====
50040
```

ì¶”ê°€ì ìœ¼ë¡œ ìë°” 7ë¶€í„°ëŠ” Random ëŒ€ì‹  ThreadLocalRandomìœ¼ë¡œ ëŒ€ì²´í•˜ëŠ” ê²ƒì„ ì¶”ì²œí•œë‹¤. 

ë” ê³ í’ˆì§ˆì˜ ë¬´ì‘ìœ„ ìˆ˜ë¥¼ ìƒì„±í•  ë¿ë§Œ ì•„ë‹ˆë¼ ì†ë„ë„ ë” ë¹ ë¥´ë‹¤.

**ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©ì‹œ ì´ì **

- **ì´ë ‡ê²Œ í‘œì¤€ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ë©´ ê·¸ ì½”ë“œë¥¼ ì‘ì„±í•œ ì „ë¬¸ê°€ì˜ ì§€ì‹ê³¼ ì—¬ëŸ¬ë¶„ë³´ë‹¤ ì•ì„œ ì‚¬ìš©í•œ ë‹¤ë¥¸ í”„ë¡œê·¸ë˜ë¨¸ë“¤ì˜ ê²½í—˜ì„ í™œìš©í•  ìˆ˜ ìˆë‹¤.**
- **í•µì‹¬ì ì¸ ì¼ê³¼ í¬ê²Œ ê´€ë ¨ì—†ëŠ” ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ ì‹œê°„ì„ í—ˆë¹„ í•˜ì§€ ì•Šì•„ë„ ëœë‹¤.**
- **ë…¸ë ¥í•˜ì§€ ì•Šì•„ë„ ì„±ëŠ¥ì´ ì§€ì†í•´ì„œ ê°œì„ ëœë‹¤.**
- **ê¸°ëŠ¥ì´ ì ì  ë§ì•„ì§„ë‹¤.**
- **ë‚´ê°€ ì‘ì„±í•œ ì½”ë“œê°€ ë§ì€ ì‚¬ëŒì—ê²Œ ë‚¯ìµì€ ì½”ë“œê°€ ë˜ì–´, ìì—°ìŠ¤ëŸ½ê²Œ ë‹¤ë¥¸ ê°œë°œìë“¤ì´ ì½ê¸° ì‰½ê³ , ìœ ì§€ë³´ìˆ˜, ì¬í™œìš©í•˜ê¸° ì¢‹ì€ ì½”ë“œê°€ ëœë‹¤.**

ê·¸ëŸ¼ì—ë„ ë¶ˆêµ¬í•˜ê³  ë§ì€ í”„ë¡œê·¸ë˜ë¨¸ê°€ ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ ê¸°ëŠ¥ ëŒ€ì‹  ì§ì ‘ êµ¬í˜„í•˜ì—¬ ì‚¬ìš©í•˜ê³  ìˆë‹¤.

WHY? ê¸°ëŠ¥ì´ ìˆëŠ” ì§€ë„ ëª¨ë¥´ê¸° ë•Œë¬¸ì´ë‹¤.

**ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ ë©”ì´ì € ë¦´ë¦¬ìŠ¤ë§ˆë‹¤ ì£¼ëª©í•  ë§Œí•œ ìˆ˜ë§ì€ ê¸°ëŠ¥ì´ ì¶”ê°€ë˜ë‹ˆ API ë¬¸ì„œë¥¼ ì½ì–´ë³´ëŠ” ê²ƒì„ ì¶”ì²œí•œë‹¤.**

ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ë„ˆë¬´ ë°©ëŒ€í•˜ì—¬ ëª¨ë“  API ë¬¸ì„œë¥¼ ì½ëŠ” ê²ƒì€ ë²…ì°¨ê² ì§€ë§Œ í”„ë¡œê·¸ë˜ë¨¸ë¼ë©´ ì•„ë˜ì˜ íŒ¨í‚¤ì§€ë“¤ì—ëŠ” ìµìˆ™í•´ì§€ì

- java.lang
- java.util
- java.io
- java.util.concurrent
- ì»¬ë ‰ì…˜ í”„ë ˆì„ì›Œí¬
- ìŠ¤íŠ¸ë¦¼ ë¼ì´ë¸ŒëŸ¬ë¦¬

ë§Œì•½ í‘œì¤€ ë¼ì´ë¸ŒëŸ¬ë¦¬ì—ì„œ ì›í•˜ëŠ” ê¸°ëŠ¥ì„ ì°¾ì§€ ëª»í•˜ë©´ êµ¬ê¸€ì˜ êµ¬ì•„ë°” ë¼ì´ë¸ŒëŸ¬ë¦¬ì²˜ëŸ¼ ì í•©í•œ ì„œë“œíŒŒí‹° ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜

### ì •ë¦¬

ë°”í€´ë¥¼ ë‹¤ì‹œ ë°œëª…í•˜ì§€ ë§ì

ì•„ì£¼ íŠ¹ë³„í•œ ê¸°ëŠ¥ì´ ì•„ë‹Œ ì´ìƒ ëˆ„êµ°ê°€ ì´ë¯¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ í˜•íƒœë¡œ êµ¬í˜„í•´ë†¨ì„ ê°€ëŠ¥ì„±ì´ í¬ë‹¤.

ëŒ€ë¶€ë¶„ì˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ ì½”ë“œëŠ” ì—¬ëŸ¬ë¶„ì´ ì§ì ‘ ì‘ì„±í•œê±°ë³´ë‹¤ í’ˆì§ˆì´ ì¢‹ê³ , ì ì°¨ ê°œì„ ë  ê°€ëŠ¥ì„±ì´ í¬ë‹¤.

**ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ ì‚¬ìš©ë²•ì„ ìµíˆê³  API ë¬¸ì„œë¥¼ ì½ì–´ë³´ëŠ” ìŠµê´€ì„ ë“¤ì´ì!** 

í˜ë“¤ê²Œ ì§ì ‘ êµ¬í˜„í•˜ì§€ë§ê³  ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì‚¬ìš©í•˜ì—¬ ì½”ë“œ ìƒì‚°ì„±ì„ ë§ì´ ë†’ì¼ ìˆ˜ ìˆë‹¤.